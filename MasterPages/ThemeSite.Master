<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="ThemeSite.master.cs"
    Inherits="Web2Print.UI.ThemeSite" %>

<%@ Register Src="/Controls/TopHeader.ascx" TagName="TopHeader" TagPrefix="uc4" %>
<%@ Register Src="~/Controls/PinkFooter.ascx" TagName="TopPinkFooter" TagPrefix="uc8" %>

<%@ Register Src="~/Controls/PinkMenuHeader.ascx" TagName="PinkHeaderMenu" TagPrefix="uc7" %>
<%@ Register Src="~/Controls/LoginBar.ascx" TagName="LoginBar" TagPrefix="uc9" %>
<%@ Register Src="/Controls/Footer.ascx" TagName="Footer" TagPrefix="uc3" %>
<%@ Register Src="/Controls/MessageBoxTwo.ascx" TagName="MessageBoxTwo" TagPrefix="uc6" %>
<%@ Register Src="/Controls/MessageBox.ascx" TagName="MessageBox" TagPrefix="uc2" %>
<%@ Register Src="~/Controls/CategoryMenuHeader.ascx" TagName="CategoryHeaderMenu"
    TagPrefix="uc8" %>
<%@ Register Src="~/Controls/SearchPostCode.ascx" TagPrefix="uc1" TagName="SearchPostCode" %>
<%@ Register Src="~/Controls/OxfordHeader.ascx" TagPrefix="uc5" TagName="OxfordHeader" %>
<%@ Register Src="~/Controls/BonhamsMenu.ascx" TagPrefix="uc10" TagName="BonhamsMenu" %>


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/LightBox/css/jquery.lightbox-0.5.css" rel="stylesheet" type="text/css" />
    <link href="../font-awesome-4.2.0/css/font-awesome.min.css" rel="stylesheet" />
   <%-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">--%>
    <link href="/Styles/CommonStyles.css" rel="stylesheet" type="text/css" />
     <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lt IE 9]>
	<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
    <asp:ContentPlaceHolder ID="HeadContents" runat="server">
    </asp:ContentPlaceHolder>
    <script type="text/javascript" language="javascript">

        function cc() {

            var ssform1 = document.forms["form1"];

            if (document.cookie == "") {

                var locationObj = window.location;

                if (locationObj.toString().indexOf("ErrorPage.aspx") == -1) {
                    locationObj.replace("ErrorPage.aspx?ErrorMsg=Please enable browser cookies as this site uses browser cookies");

                    ssform1.cookieexists.value = "false";
                }


            } else {
                /* this sets the value to true and nothing else will happen,
                the user will be able to log on*/
                ssform1.cookieexists.value = "true";
            }
        }

        /* Set a cookie to be sure that one exists.
        Note that this is outside the function*/
        document.cookie = 'killme' + escape('nothing');

    </script>
    <asp:Literal ID="ltrGoogleTag" runat="server"></asp:Literal>
    <asp:Literal ID="scrpTag" runat="server"></asp:Literal>
</head>
<body class="bodycolor" onload="cc();">
       <!-- ClickTale Top part -->
        <script type="text/javascript">
            var isPinkCards = '<%=isPink %>';
            if (isPinkCards == 1) {
                var WRInitTime = (new Date()).getTime();
            }
        </script>
<!-- ClickTale end of Top part -->
    <form id="form1" runat="server">
        <input type="hidden" name="cookieexists" value="false" />
        <asp:ScriptManager ID="ScriptManager1" runat="server"  LoadScriptsBeforeUI="true">
            <Scripts>

                <asp:ScriptReference Name="jquery" />
                <asp:ScriptReference Name="jquery-migrate" />

                <asp:ScriptReference Name="WebUIValidation.js" Assembly="System.Web" />

                <asp:ScriptReference Path="/Scripts/jquery.MultiFile.js" />
                <asp:ScriptReference Path="/LightBox/js/jquery.lightbox-0.5.js" />
            </Scripts>
            <Services>
                <asp:ServiceReference Path="/Services/WebStoreUtility.asmx" />
            </Services>
        </asp:ScriptManager>
        <script type="text/javascript" language="javascript">

            Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
            function EndRequestHandler(sender, args) {
                if (args.get_error() != undefined) {
                    args.set_errorHandled(true);
                }
            }
            function ShowProgress() {
                $('#UpdateProgressUserProfile').css('display', 'block');
            }
            function HideProgress() {
                $('#UpdateProgressUserProfile').css('display', 'none');
            }
        </script>
        <asp:UpdateProgress ID="UpdateProgressUserProfile" runat="server">
            <ProgressTemplate>
                <asp:Panel ID="Panel2" CssClass="loader" runat="server">
                    <div id="lodingDiv" class="FUPUp LCLB">
                        <div style="background-color: White; height: 100px;">
                            <br />
                            <div id="loaderimageDiv" style="padding-top: 15px;">
                                <img src='<%=ResolveUrl("~/images/asdf.gif") %>' alt="" />
                            </div>
                            <br />
                            <div id="lodingBar" style="text-align: center;">
                                Loading please wait....
                            </div>
                        </div>
                    </div>
                </asp:Panel>
            </ProgressTemplate>
        </asp:UpdateProgress>
        <asp:ContentPlaceHolder ID="cphLoginBAr" runat="server">
           <%-- <uc1:SearchPostCode runat="server" ID="SearchPostCode" />--%>
            <uc9:LoginBar ID="TopLoginBar" runat="server" />
        </asp:ContentPlaceHolder>
        <asp:ContentPlaceHolder ID="cphTopHeader" runat="server">
            <uc4:TopHeader ID="TopHeader" runat="server" />
        </asp:ContentPlaceHolder>
         <asp:ContentPlaceHolder ID="cphthemeHeader" runat="server" Visible="false">
            <uc5:OxfordHeader runat="server" ID="OxfordHeader"  />
        </asp:ContentPlaceHolder>
          <asp:ContentPlaceHolder ID="cphBonham" runat="server" Visible="false">
            <uc10:BonhamsMenu runat="server" ID="BonhamsMenu"  />
        </asp:ContentPlaceHolder>
        <asp:ContentPlaceHolder ID="cphHeaderMenu" runat="server" >
            <uc8:CategoryHeaderMenu ID="Header2" runat="server" />
        </asp:ContentPlaceHolder>
        <asp:ContentPlaceHolder ID="PageBanner" runat="server">
        </asp:ContentPlaceHolder>
        <asp:ContentPlaceHolder ID="MainContent" runat="server">
        </asp:ContentPlaceHolder>
        <asp:ContentPlaceHolder ID="cphFooter" runat="server">
            <div class="clearBoth">
                &nbsp;
            </div>
            <uc3:Footer ID="Footer1" runat="server" />
        </asp:ContentPlaceHolder>
        <asp:UpdatePanel ID="upMessageBox" runat="server">
            <ContentTemplate>
                <uc2:MessageBox ID="MyMessageBox" runat="server" />
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdatePanel ID="upMessageBox2" runat="server">
            <ContentTemplate>
                <uc6:MessageBoxTwo ID="MessageBox2" runat="server" />
            </ContentTemplate>
        </asp:UpdatePanel>
        <%-- This function will be called by the controls --%>
        <asp:Button ID="btnStartCreating" Text="START CREATING" runat="server" CssClass="start_creating_btn rounded_corners5"
            OnClick="btnStartCreating_Click" Style="display: none;" />
        <asp:HiddenField ID="hfItemId" runat="server" />
        <asp:HiddenField ID="hfCategoryId" runat="server" />
        <script type="text/javascript" language="javascript">

            function RaiseStartCreatingEvent(itemId, categoryId) {
                $('#<%=hfItemId.ClientID %>').val(itemId);
            $('#<%=hfCategoryId.ClientID %>').val(categoryId);
            __doPostBack('<%= btnStartCreating.UniqueID %>', '');
        }

        // Utility functions will be called by content pages when they need this functionality.

        function ValidateEmail(email) {
            var isValid = true;
            if (email == '') {
                var emailxreq = "<%= Resources.MyResource.emailxreq %>";
                ShowPopup('Message', emailxreq);
                isValid = false;
            }
            else {
                var re = new RegExp("^[A-Za-z0-9](([_\\.\\-]?[a-zA-Z0-9]+)*)@([A-Za-z0-9]+)(([\\.\\-]?[a-zA-Z0-9]+)*)\\.([A-Za-z]{2,})$");
                if (!re.test(email)) {
                    var PlxenterVEmail = "<%= Resources.MyResource.PlxenterVEmail %>";
                    ShowPopup('Message', PlxenterVEmail);
                    isValid = false;
                }
            }
            return isValid;
        }

        function AvoidReClickOnPostBack(sender) {
            sender.disabled = true;
            __doPostBack(sender.name, '');
        }

        $('.numeric_input').live("keyup", function () { inputControl($(this), 'int'); });
        $('.float_input').live("keyup", function () { inputControl($(this), 'float'); });

        function inputControl(input, format) {
            var value = input.val();
            var values = value.split("");
            var update = "";
            var transition = "";
            if (format == 'int') {
                expression = /^([0-9])$/;
                finalExpression = /^([1-9][0-9]*)$/;
            }
            else if (format == 'float') {
                var expression = /(^\d+$)|(^\d+\.\d+$)|[,\.]/;
                var finalExpression = /^([1-9][0-9]*[,\.]?\d{0,3})$/;
            }
            for (id in values) {
                if (expression.test(values[id]) == true && values[id] != '') {
                    transition += '' + values[id].replace(',', '.');
                    if (finalExpression.test(transition) == true) {
                        update += '' + values[id].replace(',', '.');
                    }
                }
            }
            input.val(update);
        }
        </script>
    </form>

      <!-- ClickTale Bottom part -->

<script type='text/javascript'>
    // The ClickTale Balkan Tracking Code may be programmatically customized using hooks:
    // 
    //   function ClickTalePreRecordingHook() { /* place your customized code here */  }
    //
    // For details about ClickTale hooks, please consult the wiki page 

    var isPinkCards = '<%=isPink %>';
    if (isPinkCards == 1) {
        document.write(unescape("%3Cscript%20src='" +
        (document.location.protocol == 'https:' ?
        "https://cdnssl.clicktale.net/www07/ptc/796e57b5-a898-4e98-b7dc-8cf7998962ee.js" :
        "http://cdn.clicktale.net/www07/ptc/796e57b5-a898-4e98-b7dc-8cf7998962ee.js") + "'%20type='text/javascript'%3E%3C/script%3E"));
    }
</script>

<!-- ClickTale end of Bottom part -->
</body>
</html>
