
@using MPC.Webstore.Common;
@using MPC.Models.Common;
@model MPC.Models.DomainModels.CompanyContact

<script src="~/Scripts/jquery-1.10.2.js"></script>

@using (Html.BeginForm(new { @enctype = "multipart/form-data" }))
{

<div id="PDetailDiv" class="order_container rounded_corners">

    <div class="corpPInfoCnt1 pad17">
        <div class="custom_color confirm_design">
           
            <label id="ltrlpersonalinfo">Personal Details</label>
        </div>
        <br />
        <br />
    </div>
    <div class="corpPInfoCnt2 white_background rounded_corners pad20_corp">
        <table class="tblPersonalInfoCorp" cellspacing="5">
            <tr>
                <td>
                    @if(Model.FirstName!=null&&Model.FirstName!=string.Empty)
                    {
                    <label id="lblName">@Model.FirstName</label>
                    }
                </td>
                <td>
                    @if (Model.JobTitle!=null && Model.JobTitle != string.Empty)
                    { 
                    <label id="lblJobTitle">@Model.JobTitle</label>
                    }
                    else
                    {
                        <label id="lblJobTitle">N/A</label>
                    }
                </td>
            </tr>
            <tr>
                <td>
                    
                    <label id="ltrlteritory">Territory</label>
                </td>
                <td>
                    @if (ViewBag.CompTerritory.TerritoryName!=null && ViewBag.CompTerritory.TerritoryName != string.Empty)
                    {                         
                    <label id="lblTerritory">@ViewBag.CompTerritory.TerritoryName</label>
                    }
                    else
                    {
                        <label id="lblTerritory">N/A</label>
                    }
                </td>
            </tr>
            <tr>
                <td>
                    <label id="ltrlorderlimit">Order Limit</label>
                    
                </td>
                <td>
                    @if (Model.CreditLimit.HasValue && Model.CreditLimit.Value > 0)
                    { 
                    <label id="lblOrderLimit">@Model.CreditLimit</label>
                    }
                    else
                    {
                        <label id="lblOrderLimit">N/A</label>

                    }

                </td>
            </tr>
            <tr>
                <td>
                    <label id="ltrlloplaced">Last order placed</label>
                    
                </td>
                <td>

                    @if (ViewBag.Order == null)
                    {
                        <label id="lblCanPlaceOrder">N/A</label>
                    }
                    else
                    {
                        if (ViewBag.Order.Order_Date.ToString() != null && ViewBag.Order.Order_Date.ToString() != string.Empty)
                        {
                            <label id="lblCanPlaceOrder">@ViewBag.Order.Order_Date.ToString()</label>
                        }
                        else
                        {
                            <label id="lblCanPlaceOrder">N/A</label>

                        }
                        
                    }

                </td>
            </tr>
            <tr>
                <td>
                    <label id="ltrlcplaceorder">Can Place Order</label>
                    
                </td>
                <td>
             
               @if(Model.isPlaceOrder != null && Model.isPlaceOrder.Value)
               {
                <label id="lblLastOrder">Yes</label>
               }
              else
              {

                <label id="lblLastOrder">No</label>
              }

                </td>
            </tr>
            <tr>
                <td>
                    <label id="ltrlcanapproveorder">Can Approve Orders</label>
                    
                </td>
                <td>
                 
                    @if (Model.IsApprover != null && Model.IsApprover.Value)
                    {
                        <label id="lblCanApproveOrders">Yes</label>
                    }
                    else
                    {
                        <label id="lblCanApproveOrders">No</label>
                    }
                   
                    
                </td>
            </tr>
        </table>
    </div>
    <div class="corpPInfoCnt3 white_background rounded_corners pad17 memo_message custom_color"
         id="tdcompanyopolicy">

        <div class="orederPCnt">
            Ordering Policy Statement
            <br />
           
            @if (ViewBag.CorpCompany.CorporateOrderingPolicy!=null && ViewBag.CorpCompany.CorporateOrderingPolicy != string.Empty)
            {
            <textarea name="Text1" cols="40" rows="5" class="rounded_corners5 text_boxPolicy" id="txtPolicy" readonly="readonly" >@ViewBag.CorpCompany.CorporateOrderingPolicy</textarea>
            <a id="btnCorporateOrderingPolicy1"  class="linkOrderingpolicy" onclick="ShowOrderingPolicyPopUp('Corporate Ordering Policy', '@ViewBag.CorpCompany.CorporateOrderingPolicy');">
            Set corporate ordereing policy
            </a>
            }
            else
            {
                <textarea name="Text1" cols="40" rows="5" class="rounded_corners5 text_boxPolicy" id="txtPolicy" readonly="readonly">No Policy Defined</textarea>
                <a id="btnCorporateOrderingPolicy1"  class="linkOrderingpolicy" onclick="ShowOrderingPolicyPopUp('Corporate Ordering Policy',' No Policy Defined');">
                     Set corporate ordereing policy
                </a>
            }
            <br />

            @*<a id="btnCorporateOrderingPolicy1"  class="linkOrderingpolicy" onclick="ShowOrderingPolicyPopUp('Corporate Ordering Policy', Tvalue);">
                Set corporate ordereing policy
            </a>*@

            @*<ajaxToolkit:ModalPopupExtender ID="mpeCorporateOrderingPolicy" runat="server" BackgroundCssClass="ModalPopupBG"
                                            PopupControlID="pnlCorporateOrderingPolicy" TargetControlID="btnCorporateOrderingPolicy1"
                                            BehaviorID="mpeCorporateOrderingPolicy" CancelControlID="btnCancelMessageBox"
                                            DropShadow="false">
            </ajaxToolkit:ModalPopupExtender>
            <asp:Panel ID="pnlCorporateOrderingPolicy" runat="server" Width="700px" CssClass="FileUploaderPopup rounded_corners"
                       ClientIDMode="Static" Style="display: none">
                <div class="Width100Percent">

                    <div class="exit_container">
                        <div id="btnCancelMessageBox" runat="server" class="exit_popup">
                        </div>
                    </div>
                </div>
                <div class="pop_body">
                    <asp:UpdatePanel ID="upnlBody" runat="server" UpdateMode="Conditional">
                        <contenttemplate>
                            Corporate Ordering Policy
                            <br />
                            <br />
                           
                            <asp:TextBox ID="txtCorporateOrderingPolicy" runat="server" CssClass="rounded_corners5 text_box"
                                         TextMode="MultiLine" Width="550px" Height="80px" TabIndex="11"></asp:TextBox>
                            <br />
                            <br />
                            <div class="address_contol_area1_corp">
                                <div class="float_left">
                                    <asp:Button ID="btnSaveCorporateOrderingPolicy" runat="server" Text="Save" CssClass="start_creating_btn rounded_corners5"
                                                OnClick="btnSaveCorporateOrderingPolicy_Click" />
                                </div>
                                <div class="float_left">
                                    <asp:Button ID="btnCancelCorporateOrderingPolicy" runat="server" Text="Cancel" OnClientClick="HidePnlCorporateOrderingPolicy(); return false;"
                                                CssClass="start_creating_btn rounded_corners5" />
                                </div>
                            </div>
                        </contenttemplate>
                    </asp:UpdatePanel>
                </div>
            </asp:Panel>*@
          
        </div>
        <div class="corporate_logo_small_container">
            <a href='<%=ResolveUrl("~/default.aspx") %>'>
                @*<asp:Image ID="imgCorpLogo"  BorderStyle="None" CssClass="corporate_logo_small" />*@
            </a>
            <br />
            @*<asp:Label ID="lblCorporateName"  CssClass="sign_in_heading" Text="Coporate Name" />*@
            <br />
        </div>
        <div class="clearBoth">
        </div>
    </div>

    <div class="clearBoth">
    </div>
</div>
}

 
    
    <script type="text/javascript">

       
          //  var text = $("#txtOrderPolicy").text();
        //function SaveOrderPolicy() {
        //    $.ajax({
        //        url: '/PersonalDetailAndOrderPolicy/SaveOrderPolicy',
        //        type: 'POST',    
        //        dataType: 'json',
        //        data: { id: 'value' },
        //        success: function (data) {
        //            alert("success");
        //        },
        //        error: function () {
        //            alert('error');
        //        }
        //    });
        //}

        function Order() {

            var text = $("#txtOrderPolicy").val();
                
            
                $.ajax({
                    
                    type: "POST",
                    url: "/PersonalDetailAndOrderPolicy/SaveOrderPolicy?id=" + text + ""

                });

        }

    </script>
   