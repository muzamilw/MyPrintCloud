@model MPC.Models.DomainModels.Company
@using MPC.Models.DomainModels;
@using MPC.Webstore.Common;
@{
    List<ProductCategory> ParentCategories = ViewData["ParentCats"] as List<ProductCategory>;
    List<ProductCategory> subCategories = ViewData["SubCats"] as List<ProductCategory>;
    int countOfParent = 0;
    int countOfChild = 0;
}
@*<div class="Container">*@
<div id="root-wrapper">
    <div class="wrapper">
        <div class="page">
                <div class="header-container header-regular" id="top">
                    <div class="header-container2">

                        <div class="header-container3">

                            <div class="header-top-container">
                                <div class="header-top header container clearer  show-bg">
                                    <div class="inner-container">

                                        <!--<div class="item item-left hide-below-960">
                                    <p class="welcome-msg"> </p>
                                </div>-->

                                        <div id="currency-switcher-wrapper-regular" class="item item-right"></div>
                                        <div id="lang-switcher-wrapper-regular" class="item item-right"></div>

                                    </div> <!-- end: inner-container -->
                                </div> <!-- end: header-top -->
                            </div> <!-- end: header-top-container -->

                            <div class="header-primary-container">
                                <div class="header-primary header container">
                                    <div class="inner-container">

                                        <div class="hp-blocks-holder skip-links--4">


                                            <!-- Mobile logo -->
                                            <div class="logo-wrapper--mobile">
                                                <a class="logo logo--mobile" href="@ViewBag.DefaultUrl" title="Liquid Bubble Print">
                                                    <img id="logoImageee" src="/@Model.Image" alt="Liquid Bubble Print">
                                                </a>
                                            </div>
                                            <div class="clearer after-mobile-logo"></div>



                                            <!-- Mobile cart wrapper
                                    <div id="mini-cart-wrapper-mobile"></div>-->
                                            <!-- Left column -->
                                            <div class="hp-block h-left regular-logo">

                                                <div class="logo-wrapper logo-wrapper--regular">
                                                    <h1 class="logo logo--regular"><strong>@ViewBag.CompanyName</strong><a href="@ViewBag.DefaultUrl" title="Liquid Bubble Print"><img id="logoImageee" src="/@Model.Image" alt="Liquid Bubble Print"></a></h1>
                                                </div>

                                            </div>


                                            <!-- Right column Custom -->

                                            <div class="hp-block h-right">
                                                <!-- Central column -->
                                                <div class="header-top-right">
                                                    <div class="top-links top-account">
                                                        <ul>
                                                            @if (ViewBag.IsLogin == 0)
                                                        {
                                                        <li>
                                                            <a href="/Login" title="Sign In">Sign In </a>

                                                        </li>
                                                        <li class="last">
                                                            <a title="Register" href="/SignUp">Register</a>
                                                        </li>
                                                        }
                                                        else
                                                        {
                                                        <li>
                                                            <a href="@Url.Action("LogOut", "LoginBar")" title="Sign Out">Sign Out </a>

                                                        </li>
                                                        }

                                                        </ul>



                                                    </div>
                                                    <ul class="links custom">
                                                        <li class="first">
                                                            <a href="/" title="Liquid Bubble" target="_blank">Main Site</a>
                                                        </li>
                                                        <li class="phn-num">
                                                            <span>
                                                                <i class="fa phn-num"></i><label>Order Hotline</label><a class="phone-call" title="0208 900 1191" href="tel:0208 900 1191">@ViewBag.Phone</a>
                                                            </span>
                                                        </li>
                                                        <li class="e-mail">
                                                            <span>
                                                                <i class="fa e-mail"></i>
                                                                <label>Email</label><a href="mailto:@ViewBag.email" title="@ViewBag.email">@ViewBag.email</a>
                                                            </span>
                                                        </li>
                                                        <li class="track-order">
                                                            <span>
                                                                <i class="fa track-order"></i>
                                                                <label>Track</label><a title="Your Order" href="">Your Order</a>
                                                            </span>
                                                        </li>
                                                    </ul>
                                                </div>

                                                <div class="h-rigt-btm">
                                                    <!-- Skip Links -->

                                                    <div class="hp-block high-quality-moblie">
                                                        <div class="high-quality">
                                                            <p>High Quality Digital<br>&amp; Litho Printers</p>
                                                        </div>
                                                    </div>
                                                    <a href="#header-nav" class="skip-link skip-nav">
                                                        <span><i style="font-size:20px;color:white;" class="fa fa-bars"></i></span>
                                                        <span class="label">Menu</span>
                                                    </a>


                                                    <a href="#header-account" class="skip-link skip-account">
                                                        <span>
                                                            <i style="font-size:20px;color:white;" class="fa fa-user"></i>
                                                        </span>

                                                        <span class="label">My Account</span>
                                                    </a>



                                                    <div class="hp-block high-quality-desktop">
                                                        <div class="high-quality">
                                                            <p>High Quality Digital<br>&amp; Litho Printers</p>
                                                        </div>
                                                    </div>
                                                    <div id="header-account" class="top-links links-wrapper-separators-left skip-content skip-content--style btm-account">
                                                        <ul class="links">
                                                            @if (ViewBag.IsLogin == 0)
                                                        {
                                                        <li class="first"><a href="/Login" title="Sign in">Sign in</a></li>
                                                        <li class=" last" id="link-sign-up"><a href="/SignUp" title="Register">Register</a></li>
                                                        }
                                                        else
                                                        {
                                                        <li class="first"><a href="@Url.Action("LogOut", "LoginBar")" title="Sign Out">Sign Out</a></li>
                                                        }

                                                        </ul>

                                                    </div>

                                                    <div id="header-search" class="hp-block search-wrapper-centered clearer grid12-3  search-wrapper skip-content skip-content--style">

                                                    </div>

                                                    <!-- Right column -->
                                                    <div class="hp-block user-menu clearer grid12-4">


                                                        <div id="mini-cart-wrapper-regular">

                                                            <div id="mini-cart" class="mini-cart dropdown is-empty">

                                                                <a href="/ShopCart" class=" cursor-pointer mini-cart-heading dropdown-heading cover skip-link skip-cart">
                                                                    <span style="cursor:pointer;" onclick="MoveToShopCart();">

                                                                        <span class="icon ic ic-cart-bg" style="cursor:pointer;"></span>
                                                                        <span style="cursor:pointer;" class="count">Cart [@ViewBag.CartCount] Items</span>

                                                                    </span>
                                                                </a> <!-- end: heading -->


                                                                <div id="header-cart" class="mini-cart-content dropdown-content left-hand block block block-cart skip-content skip-content--style" style="display:none;">
                                                                    <div class="block-content-inner">

                                                                        <div class="empty">You have [@ViewBag.CartCount] items in your shopping cart.</div>

                                                                    </div> <!-- end: inner block -->
                                                                </div> <!-- end: dropdown-content -->

                                                            </div> <!-- end: mini-cart -->

                                                        </div>








                                                        <div id="header-account" class="top-links links-wrapper-separators-left skip-content skip-content--style">

                                                            <ul class="links">
                                                                @if (ViewBag.IsLogin == 0)
                                                            {
                                                            <li class="first"><a href="/Login" title="Sign in">Sign in</a></li>
                                                            <li class=" last" id="link-sign-up"><a href="/SignUp" title="Register">Register</a></li>
                                                            }
                                                            else
                                                            {
                                                            <li class="first"><a href="@Url.Action("LogOut", "LoginBar")" title="Sign Out">Sign Out</a></li>
                                                            }

                                                            </ul>

                                                        </div> <!-- end: top-links -->



                                                    </div>
                                                    <!-- end: user-menu -->
                                                </div>
                                            </div>
                                            <div class="clear"></div>
                                        </div>
                                    </div> <!-- end: v-grid-container -->

                                </div> <!-- end: inner-container -->
                            </div> <!-- end: header-primary -->
                        </div> <!-- end: header-primary-container -->
                        
                        <div id="header-nav" class="nav-container sticky-container skip-content">
                            <div class="nav container clearer  has-outline show-bg">
                                <div class="inner-container">

                                    <div class="mobnav-trigger-wrapper" style="display: none;">
                                        <a class="mobnav-trigger" href="#">
                                            <span class="trigger-icon"><span class="line"></span><span class="line"></span><span class="line"></span></span>
                                            <span>Menu</span>
                                        </a>
                                    </div>
                                    <ul id="nav" class="nav-regular opt-fx-fade-inout opt-sb0">
                                        <li class="nav-item nav-item--home level0 level-top active nav-item--homeicon">
                                            <a class="level-top" href="/"><span class="fa fa-home"></span></a>
                                        </li>
                                        <li class="nav-item level0 nav-1 level-top first nav-item--parent mega parent">
                                            <a href="/AllProducts" class="level-top"><span>All Products</span><span class="caret">&nbsp;</span></a><span class="opener"></span><div class="nav-panel--dropdown nav-panel" style="width: 845px; left: 59.15625px; top: 48px; display: none;">
                                                <div class="nav-panel-inner">
                                                    <div class="nav-block--center grid12-7">
                                                        <ul id="innerUl" class="level0 nav-submenu nav-submenu--mega dd-itemgrid dd-itemgrid-8col">
                                                            @foreach (var topCat in ViewData["ParentCats"] as List<MPC.Models.DomainModels.ProductCategory>)
                                                            {
                                                                var subCat = subCategories.Where(i => i.ParentCategoryId == topCat.ProductCategoryId).ToList();
                                                                var parentliClass = "";
                                                                var parentClassWithSubCats = " nav-item--only-subcategories parent";
                                                                if (countOfParent == 0)
                                                                {
                                                                    parentliClass = "nav-item level1 nav-1-1 first";

                                                                }
                                                                else
                                                                {
                                                                    parentliClass = "nav-item level1 nav-1-" + countOfParent;
                                                                }

                                                                if (subCat.Count > 0)
                                                                {
                                                                    <li class="@parentliClass@parentClassWithSubCats">
                                                                        <a href="/Category/@Utils.specialCharactersEncoder(topCat.CategoryName)/@topCat.ProductCategoryId">
                                                                            <span>@topCat.CategoryName </span><span class="caret">&nbsp;</span>
                                                                        </a>
                                                                        <span class="opener"></span>
                                                                        <ul class="level1 nav-submenu nav-panel" style="">
                                                                            @foreach (ProductCategory subCats in subCat)
                                                                            {
                                                                                var childliClass = "";

                                                                                if (countOfChild == 0)
                                                                                {
                                                                                    childliClass = "nav-item level2 nav-1-" + countOfParent + "-1 first classic";

                                                                                }
                                                                                else
                                                                                {
                                                                                    childliClass = "nav-item level2 nav-1-" + countOfParent + "-" + countOfChild + " classic";
                                                                                }
                                                                                countOfChild++;
                                                                                <li class="nav-item level2 nav-1-9-1 first last classic">
                                                                                    <a href="/Category/@Utils.specialCharactersEncoder(subCats.CategoryName)/@subCats.ProductCategoryId"><span>@subCats.CategoryName</span></a>
                                                                                </li>
                                                                            }
                                                                        </ul>
                                                                    </li>
                                                                }
                                                                else
                                                                {
                                                                    <li class="@parentliClass"><a href="/Category/@Utils.specialCharactersEncoder(topCat.CategoryName)/@topCat.ProductCategoryId"><span>@topCat.CategoryName</span></a></li>
                                                                }
                                                                countOfChild = 0;
                                                                countOfParent++;
                                                            }
                                                        </ul>

                                                    </div>
                                                    <div class="nav-block nav-block--right std grid12-5">
                                                        <div class="right-banner">
                                                            <a href="#" title="Brochure Printing"><img src="/Content/BubbleImages/mega-menu-dropdpwn-right-banner.jpg" alt="mega-menu-dropdpwn-right-banner"></a>
                                                        </div>
                                                    </div><div class="nav-block nav-block--bottom std grid-full">
                                                        <div class="bottom-banner">
                                                            <img src="/Content/BubbleImages/mega-menu-dropdpwn-bottom-banner.jpg" alt="mega-menu-dropdpwn-bottom-banner">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                        @if (Model.IsAllowRequestaQuote == true)
                                        {
                                            <li class="nav-item level0 nav-2 level-top classic"><a href="/RequestQuote" class="level-top"><span>@Html.Raw(Html.GetKeyValueFromResourceFile("lblTitleRequestQuote", UserCookieManager.WBStoreId, "Request A Quote"))</span></a></li>
                                        }
                                        @if (ViewBag.AboutUs != null)
                                        {
                                            <li class="nav-item level0 nav-3 level-top classic"><a href="/pages/@Utils.specialCharactersEncoder(ViewBag.AboutUs.PageTitle)/@ViewBag.AboutUs.PageId" class="level-top"><span>About Us</span></a></li>
                                        }
                                        <li class="nav-item level0 nav-4 level-top classic"><a href="/ContactUs" class="level-top"><span>Contact Us</span></a></li>
                                    </ul>
                                </div> <!-- end: inner-container -->
                            </div> <!-- end: nav -->
                        </div>                        

                    </div> <!-- end: header-container3 -->
                </div> <!-- end: header-container2 -->
            </div>
       
            <div class="header-regular go-quickly">
                <div class="container">
                    <div class="go-quickly-inner">
                        @*<a href="#quick" class="skip-link skip-nav">
                            <span class="label">Go quickly to</span>
                        </a>*@
                        <label>Go quickly to</label>
                        <ul id="quick" class="skip-content">
                            @foreach (var products in ParentCategories)
                        {
                        <li>
                            <a href="/Category/@Utils.specialCharactersEncoder(products.CategoryName)/@products.ProductCategoryId" title="@products.CategoryName">@products.CategoryName</a>
                        </li>
                        }
                        </ul>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    

@*</div>*@
<link href="/Content/BubbleFiles/bubblecss.css" rel="stylesheet" media="all" />
<link href="/Content/BubbleFiles/bubbles2.css" rel="stylesheet" media="print" />

<script src="/Content/BubbleFiles/Bubble.js"></script>
<script type="text/javascript">
    function MoveToShopCart()
    {
        window.location.href = "/ShopCart";
    }


</script>
<script type="text/javascript">
    //<![CDATA[






    var SmartHeader = {

        mobileHeaderThreshold: 1023
        , rootContainer: jQuery('.header-container')

        , init: function () {
            enquire.register('(max-width: ' + (SmartHeader.mobileHeaderThreshold - 1) + 'px)', {
                match: SmartHeader.moveElementsToMobilePosition,
                unmatch: SmartHeader.moveElementsToRegularPosition
            });
        }

        , activateMobileHeader: function () {
            SmartHeader.rootContainer.addClass('header-mobile').removeClass('header-regular');
        }

        , activateRegularHeader: function () {
            SmartHeader.rootContainer.addClass('header-regular').removeClass('header-mobile');
        }

        , moveElementsToMobilePosition: function () {
            SmartHeader.activateMobileHeader();

            jQuery('#mini-cart-wrapper-mobile').prepend(jQuery('#mini-cart'));
            jQuery('.skip-active').removeClass('skip-active');

            //Disable dropdowns
            jQuery('#mini-cart').removeClass('dropdown');
            jQuery('#mini-compare').removeClass('dropdown');

            //Clean up after dropdowns: reset the "display" property
            jQuery('#header-cart').css('display', '');
            jQuery('#header-compare').css('display', '');

        }

        , moveElementsToRegularPosition: function () {
            SmartHeader.activateRegularHeader();

            jQuery('#mini-cart-wrapper-regular').prepend(jQuery('#mini-cart'));
            jQuery('.skip-active').removeClass('skip-active');

            //Enable dropdowns
            jQuery('#mini-cart').addClass('dropdown');
            jQuery('#mini-compare').addClass('dropdown');
        }

    }; //end: SmartHeader

    SmartHeader.init();

    jQuery(function ($) {

        //Skip Links
        var skipContents = $('.skip-content');
        var skipLinks = $('.skip-link');

        skipLinks.on('click', function (e) {
          
            e.preventDefault();
            
            var self = $(this);
            var target = self.attr('href');

            //Get target element
            var elem = $(target);

            //Check if stub is open
            var isSkipContentOpen = elem.hasClass('skip-active') ? 1 : 0;

            //Hide all stubs
            skipLinks.removeClass('skip-active');
            skipContents.removeClass('skip-active');

            //Toggle stubs
            if (isSkipContentOpen) {
                self.removeClass('skip-active');
            } else {
                self.addClass('skip-active');
                elem.addClass('skip-active');
            }
        });

    }); //end: on document ready





    //]]>
</script>
<script type="text/javascript">
    //<![CDATA[

    var gridItemsEqualHeightApplied = false;
    function setGridItemsEqualHeight($) {
        var $list = $('.category-products-grid');
        var $listItems = $list.children();

        var centered = $list.hasClass('centered');
        var gridItemMaxHeight = 0;
        $listItems.each(function () {

            $(this).css("height", "auto"); var $object = $(this).find('.actions');

            if (centered) {
                var objectWidth = $object.width();
                var availableWidth = $(this).width();
                var space = availableWidth - objectWidth;
                var leftOffset = space / 2;
                $object.css("padding-left", leftOffset + "px");
            }

            var bottomOffset = parseInt($(this).css("padding-top"));
            if (centered) bottomOffset += 10;
            $object.css("bottom", bottomOffset + "px");

            if ($object.is(":visible")) {
                var objectHeight = $object.height();
                $(this).css("padding-bottom", (objectHeight + bottomOffset) + "px");
            }


            gridItemMaxHeight = Math.max(gridItemMaxHeight, $(this).height());
        });

        //Apply max height
        $listItems.css("height", gridItemMaxHeight + "px");
        gridItemsEqualHeightApplied = true;

    }



    jQuery(function ($) {

        $('.collapsible').each(function (index) {
            $(this).prepend('<span class="opener"></span>');
            if ($(this).hasClass('active')) {
                $(this).children('.block-content').css('display', 'block');
            }
            else {
                $(this).children('.block-content').css('display', 'none');
            }
        });
        $('.collapsible .opener').click(function () {

            var parent = $(this).parent();
            if (parent.hasClass('active')) {
                $(this).siblings('.block-content').stop(true).slideUp(300, "easeOutCubic");
                parent.removeClass('active');
            }
            else {
                $(this).siblings('.block-content').stop(true).slideDown(300, "easeOutCubic");
                parent.addClass('active');
            }

        });


        var ddOpenTimeout;
        var dMenuPosTimeout;
        var DD_DELAY_IN = 200;
        var DD_DELAY_OUT = 0;
        var DD_ANIMATION_IN = 0;
        var DD_ANIMATION_OUT = 0;

        $('.clickable-dropdown > .dropdown-heading').click(function () {
            $(this).parent().addClass('open');
            $(this).parent().trigger('mouseenter');
        });

        //$('.dropdown-heading').on('click', function(e) {
        $(document).on('click', '.dropdown-heading', function (e) {
            e.preventDefault();
        });

        $(document).on('mouseenter', '.dropdown', function () {

            var ddToggle = $(this).children('.dropdown-heading');
            var ddMenu = $(this).children('.dropdown-content');
            var ddWrapper = ddMenu.parent();
            ddMenu.css("left", "");
            ddMenu.css("right", "");

            if ($(this).hasClass('clickable-dropdown')) {
                if ($(this).hasClass('open')) {
                    $(this).children('.dropdown-content').stop(true, true).delay(DD_DELAY_IN).fadeIn(DD_ANIMATION_IN, "easeOutCubic");
                }
            }
            else {
                clearTimeout(ddOpenTimeout);
                ddOpenTimeout = setTimeout(function () {

                    ddWrapper.addClass('open');

                }, DD_DELAY_IN);

                //$(this).addClass('open');
                $(this).children('.dropdown-content').stop(true, true).delay(DD_DELAY_IN).fadeIn(DD_ANIMATION_IN, "easeOutCubic");
            }

            clearTimeout(dMenuPosTimeout);
            dMenuPosTimeout = setTimeout(function () {

                if (ddMenu.offset().left < 0) {
                    var space = ddWrapper.offset().left; ddMenu.css("left", (-1) * space);
                    ddMenu.css("right", "auto");
                }

            }, DD_DELAY_IN);

        }).on('mouseleave', '.dropdown', function () {

            var ddMenu = $(this).children('.dropdown-content');
            clearTimeout(ddOpenTimeout); ddMenu.stop(true, true).delay(DD_DELAY_OUT).fadeOut(DD_ANIMATION_OUT, "easeInCubic");
            if (ddMenu.is(":hidden")) {
                ddMenu.hide();
            }
            $(this).removeClass('open');
        });






        var windowScroll_t;
        $(window).scroll(function () {

            clearTimeout(windowScroll_t);
            windowScroll_t = setTimeout(function () {

                if ($(this).scrollTop() > 100) {
                    $('#scroll-to-top').fadeIn();
                }
                else {
                    $('#scroll-to-top').fadeOut();
                }

            }, 500);

        });

        $('#scroll-to-top').click(function () {
            $("html, body").animate({ scrollTop: 0 }, 600, "easeOutCubic");
            return false;
        });




        $('.category-products-grid').on('mouseenter', '.item', function () {
            $(this).find(".display-onhover").fadeIn(400, "easeOutCubic");
        }).on('mouseleave', '.item', function () {
            $(this).find(".display-onhover").stop(true).hide();
        });




        $('.products-grid, .products-list').on('mouseenter', '.product-image-wrapper', function () {
            $(this).find(".alt-img").fadeIn(400, "easeOutCubic");
        }).on('mouseleave', '.product-image-wrapper', function () {
            $(this).find(".alt-img").stop(true).fadeOut(400, "easeOutCubic");
        });



        $('.fade-on-hover').on('mouseenter', function () {
            $(this).animate({ opacity: 0.75 }, 300, 'easeInOutCubic');
        }).on('mouseleave', function () {
            $(this).stop(true).animate({ opacity: 1 }, 300, 'easeInOutCubic');
        });



        var dResize = {

            winWidth: 0
    , winHeight: 0
    , windowResizeTimeout: null

    , init: function () {
        dResize.winWidth = $(window).width();
        dResize.winHeight = $(window).height();
        dResize.windowResizeTimeout;

        $(window).on('resize', function (e) {
            clearTimeout(dResize.windowResizeTimeout);
            dResize.windowResizeTimeout = setTimeout(function () {
                dResize.onEventResize(e);
            }, 50);
        });
    }

    , onEventResize: function (e) {
        //Prevent from executing the code in IE when the window wasn't actually resized
        var winNewWidth = $(window).width();
        var winNewHeight = $(window).height();

        //Code in this condition will be executed only if window was actually resized
        if (dResize.winWidth != winNewWidth || dResize.winHeight != winNewHeight) {
            //Trigger deferred resize event
            $(document).trigger("themeResize", e);

            //Additional code executed on deferred resize
            dResize.onEventDeferredResize();
        }

        //Update window size variables
        dResize.winWidth = winNewWidth;
        dResize.winHeight = winNewHeight;
    }

    , onEventDeferredResize: function () //Additional code, execute after window was actually resized
    {
        //Products grid: equal height of items
        setGridItemsEqualHeight($);

    }

        }; //end: dResize

        dResize.init();



    }); //end: on document ready



    jQuery(window).load(function () {

        setGridItemsEqualHeight(jQuery);

    }); //end: jQuery(window).load(){...}





    var MegaMenu = {

        mobileMenuThreshold: 1023, bar: jQuery('#nav')
        , panels: null
        , mobnavTriggerWrapper: null
        , itemSelector: 'li'
        , panelSelector: '.nav-panel'
        , openerSelector: '.opener'
        , isTouchDevice: ('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0)
        , ddDelayIn: 100
        , ddDelayOut: 200
        , ddAnimationDurationIn: 100
        , ddAnimationDurationOut: 300

        , init: function () {
            MegaMenu.panels = MegaMenu.bar.find(MegaMenu.panelSelector);
            MegaMenu.mobnavTriggerWrapper = jQuery('.mobnav-trigger-wrapper');
        }

        , initDualMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            if (jQuery(window).width() >= MegaMenu.mobileMenuThreshold) {
                MegaMenu.cleanUpAfterMobileMenu(); //Required for IE8
            }

            enquire
                .register('screen and (max-width: ' + (MegaMenu.mobileMenuThreshold - 1) + 'px)', {
                    match: MegaMenu.activateMobileMenu,
                    unmatch: MegaMenu.cleanUpAfterMobileMenu
                })
                .register('screen and (min-width: ' + MegaMenu.mobileMenuThreshold + 'px)', {
                    deferSetup: true,
                    setup: MegaMenu.cleanUpAfterMobileMenu,
                    match: MegaMenu.activateRegularMenu,
                    unmatch: MegaMenu.prepareMobileMenu
                });
        }

        , initMobileMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            MegaMenu.activateMobileMenu();
        }

        , activateMobileMenu: function () {
            MegaMenu.mobnavTriggerWrapper.show();
            MegaMenu.bar.addClass('nav-mobile acco').removeClass('nav-regular');
        }

        , activateRegularMenu: function () //Default state
        {
            MegaMenu.bar.addClass('nav-regular').removeClass('nav-mobile acco');
            MegaMenu.mobnavTriggerWrapper.hide();
        }

        , cleanUpAfterMobileMenu: function () {
            MegaMenu.panels.css('display', '');
        }

        , prepareMobileMenu: function () {
            MegaMenu.panels.hide();

            MegaMenu.bar.find('.item-active').each(function () {
                jQuery(this).children('.nav-panel').show();
            });
        }

    }; //end: MegaMenu




    MegaMenu.initDualMode();

    //Toggle mobile menu
    jQuery('a.mobnav-trigger').on('click', function (e) {
        e.preventDefault();
        if (jQuery(this).hasClass('active')) {
            MegaMenu.bar.removeClass('show');
            jQuery(this).removeClass('active');
        }
        else {
            MegaMenu.bar.addClass('show');
            jQuery(this).addClass('active');
        }
    });





    jQuery(function ($) {

        var menubar = MegaMenu.bar;

        menubar.on('click', '.no-click', function (e) {
            e.preventDefault();
        });

        menubar.on('mouseenter', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                var item = $(this);
                var dd = item.children('.nav-panel');

                var itemPos = item.position();
                var ddPos = { left: itemPos.left, top: itemPos.top + item.height() };
                if (dd.hasClass('full-width')) { ddPos.left = 0; }

                dd.removeClass('tmp-full-width');

                var ddConOffset = menubar.offset().left;
                var outermostCon = $(window);

                var outermostContainerWidth = outermostCon.width();
                var ddOffset = ddConOffset + ddPos.left;
                var ddWidth = dd.outerWidth();

                if ((ddOffset + ddWidth) > outermostContainerWidth) {
                    var diff = (ddOffset + ddWidth) - outermostContainerWidth;
                    var ddPosLeft_NEW = ddPos.left - diff;

                    var ddOffset_NEW = ddOffset - diff;

                    if (ddOffset_NEW < 0) {
                        dd.addClass('tmp-full-width');
                        ddPos.left = 0;
                    }
                    else {
                        ddPos.left = ddPosLeft_NEW;
                    }
                }

                dd
                    .css({
                        'left': ddPos.left + 'px',
                        'top': ddPos.top + 'px'
                    })
                    .stop(true, true).delay(MegaMenu.ddDelayIn).fadeIn(MegaMenu.ddAnimationDurationIn, "easeOutCubic");
            }

        }).on('mouseleave', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                $(this).children(".nav-panel")
                .stop(true, true).delay(MegaMenu.ddDelayOut).fadeOut(MegaMenu.ddAnimationDurationOut, "easeInCubic");
            }

        }); //end: menu top-level dropdowns

    }); //end: on document ready

    jQuery(window).on("load", function () {

        var menubar = MegaMenu.bar;

        if (MegaMenu.isTouchDevice) {
            menubar.on('click', 'a', function (e) {

                link = jQuery(this);
                if (!menubar.hasClass('nav-mobile') && link.parent().hasClass('nav-item--parent')) {
                    if (!link.hasClass('ready')) {
                        e.preventDefault();
                        menubar.find('.ready').removeClass('ready');
                        link.parents('li').children('a').addClass('ready');
                    }
                }

            }); //end: on click
        } //end: if isTouchDevice
        jQuery(window).load(function(){
		
							setGridItemsEqualHeight(jQuery);
		
	}); //end: jQuery(window).load(){...}

    }); //end: on load



    //<![CDATA[



    var MegaMenu = {

        mobileMenuThreshold: 1023, bar: jQuery('#nav')
        , panels: null
        , mobnavTriggerWrapper: null
        , itemSelector: 'li'
        , panelSelector: '.nav-panel'
        , openerSelector: '.opener'
        , isTouchDevice: ('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0)
        , ddDelayIn: 100
        , ddDelayOut: 200
        , ddAnimationDurationIn: 100
        , ddAnimationDurationOut: 300

        , init: function () {
          //  MegaMenu.panels = MegaMenu.bar.find(MegaMenu.panelSelector);
          //  MegaMenu.mobnavTriggerWrapper = jQuery('.mobnav-trigger-wrapper');
        }

        , initDualMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            if (jQuery(window).width() >= MegaMenu.mobileMenuThreshold) {
                MegaMenu.cleanUpAfterMobileMenu(); //Required for IE8
            }

            enquire
                .register('screen and (max-width: ' + (MegaMenu.mobileMenuThreshold - 1) + 'px)', {
                    match: MegaMenu.activateMobileMenu,
                    unmatch: MegaMenu.cleanUpAfterMobileMenu
                })
                .register('screen and (min-width: ' + MegaMenu.mobileMenuThreshold + 'px)', {
                    deferSetup: true,
                    setup: MegaMenu.cleanUpAfterMobileMenu,
                    match: MegaMenu.activateRegularMenu,
                    unmatch: MegaMenu.prepareMobileMenu
                });
        }

        , initMobileMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            MegaMenu.activateMobileMenu();
        }

        , activateMobileMenu: function () {
            MegaMenu.mobnavTriggerWrapper.show();
            MegaMenu.bar.addClass('nav-mobile acco').removeClass('nav-regular');
        }

        , activateRegularMenu: function () //Default state
        {
            MegaMenu.bar.addClass('nav-regular').removeClass('nav-mobile acco');
            MegaMenu.mobnavTriggerWrapper.hide();
        }

        , cleanUpAfterMobileMenu: function () {
            MegaMenu.panels.css('display', '');
        }

        , prepareMobileMenu: function () {
            MegaMenu.panels.hide();

            MegaMenu.bar.find('.item-active').each(function () {
                jQuery(this).children('.nav-panel').show();
            });
        }

    }; //end: MegaMenu




    MegaMenu.initDualMode();

    //Toggle mobile menu
    jQuery('a.mobnav-trigger').on('click', function (e) {
        e.preventDefault();
        if (jQuery(this).hasClass('active')) {
            MegaMenu.bar.removeClass('show');
            jQuery(this).removeClass('active');
        }
        else {
            MegaMenu.bar.addClass('show');
            jQuery(this).addClass('active');
        }
    });





    jQuery(function ($) {

        var menubar = MegaMenu.bar;

        menubar.on('click', '.no-click', function (e) {
            e.preventDefault();
        });

        menubar.on('mouseenter', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                var item = $(this);
                var dd = item.children('.nav-panel');

                var itemPos = item.position();
                var ddPos = { left: itemPos.left, top: itemPos.top + item.height() };
                if (dd.hasClass('full-width')) { ddPos.left = 0; }

                dd.removeClass('tmp-full-width');

                var ddConOffset = menubar.offset().left;
                var outermostCon = $(window);

                var outermostContainerWidth = outermostCon.width();
                var ddOffset = ddConOffset + ddPos.left;
                var ddWidth = dd.outerWidth();

                if ((ddOffset + ddWidth) > outermostContainerWidth) {
                    var diff = (ddOffset + ddWidth) - outermostContainerWidth;
                    var ddPosLeft_NEW = ddPos.left - diff;

                    var ddOffset_NEW = ddOffset - diff;

                    if (ddOffset_NEW < 0) {
                        dd.addClass('tmp-full-width');
                        ddPos.left = 0;
                    }
                    else {
                        ddPos.left = ddPosLeft_NEW;
                    }
                }

                dd
                    .css({
                        'left': ddPos.left + 'px',
                        'top': ddPos.top + 'px'
                    })
                    .stop(true, true).delay(MegaMenu.ddDelayIn).fadeIn(MegaMenu.ddAnimationDurationIn, "easeOutCubic");
            }

        }).on('mouseleave', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                $(this).children(".nav-panel")
                .stop(true, true).delay(MegaMenu.ddDelayOut).fadeOut(MegaMenu.ddAnimationDurationOut, "easeInCubic");
            }

        }); //end: menu top-level dropdowns

    }); //end: on document ready

    jQuery(window).on("load", function () {

        var menubar = MegaMenu.bar;

        if (MegaMenu.isTouchDevice) {
            menubar.on('click', 'a', function (e) {

                link = jQuery(this);
                if (!menubar.hasClass('nav-mobile') && link.parent().hasClass('nav-item--parent')) {
                    if (!link.hasClass('ready')) {
                        e.preventDefault();
                        menubar.find('.ready').removeClass('ready');
                        link.parents('li').children('a').addClass('ready');
                    }
                }

            }); //end: on click
        } //end: if isTouchDevice

    }); //end: on load




    //]]>


    //]]>
</script>
<script type="text/javascript">
    //<![CDATA[

    var gridItemsEqualHeightApplied = false;
    function setGridItemsEqualHeight($) {
        var $list = $('.category-products-grid');
        var $listItems = $list.children();

        var centered = $list.hasClass('centered');
        var gridItemMaxHeight = 0;
        $listItems.each(function () {

            $(this).css("height", "auto"); var $object = $(this).find('.actions');

            if (centered) {
                var objectWidth = $object.width();
                var availableWidth = $(this).width();
                var space = availableWidth - objectWidth;
                var leftOffset = space / 2;
                $object.css("padding-left", leftOffset + "px");
            }

            var bottomOffset = parseInt($(this).css("padding-top"));
            if (centered) bottomOffset += 10;
            $object.css("bottom", bottomOffset + "px");

            if ($object.is(":visible")) {
                var objectHeight = $object.height();
                $(this).css("padding-bottom", (objectHeight + bottomOffset) + "px");
            }


            gridItemMaxHeight = Math.max(gridItemMaxHeight, $(this).height());
        });

        //Apply max height
        $listItems.css("height", gridItemMaxHeight + "px");
        gridItemsEqualHeightApplied = true;

    }



    jQuery(function ($) {

        $('.collapsible').each(function (index) {
            $(this).prepend('<span class="opener"></span>');
            if ($(this).hasClass('active')) {
                $(this).children('.block-content').css('display', 'block');
            }
            else {
                $(this).children('.block-content').css('display', 'none');
            }
        });
        $('.collapsible .opener').click(function () {

            var parent = $(this).parent();
            if (parent.hasClass('active')) {
                $(this).siblings('.block-content').stop(true).slideUp(300, "easeOutCubic");
                parent.removeClass('active');
            }
            else {
                $(this).siblings('.block-content').stop(true).slideDown(300, "easeOutCubic");
                parent.addClass('active');
            }

        });


        var ddOpenTimeout;
        var dMenuPosTimeout;
        var DD_DELAY_IN = 200;
        var DD_DELAY_OUT = 0;
        var DD_ANIMATION_IN = 0;
        var DD_ANIMATION_OUT = 0;

        $('.clickable-dropdown > .dropdown-heading').click(function () {
            $(this).parent().addClass('open');
            $(this).parent().trigger('mouseenter');
        });

        //$('.dropdown-heading').on('click', function(e) {
        $(document).on('click', '.dropdown-heading', function (e) {
            e.preventDefault();
        });

        $(document).on('mouseenter', '.dropdown', function () {

            var ddToggle = $(this).children('.dropdown-heading');
            var ddMenu = $(this).children('.dropdown-content');
            var ddWrapper = ddMenu.parent();
            ddMenu.css("left", "");
            ddMenu.css("right", "");

            if ($(this).hasClass('clickable-dropdown')) {
                if ($(this).hasClass('open')) {
                    $(this).children('.dropdown-content').stop(true, true).delay(DD_DELAY_IN).fadeIn(DD_ANIMATION_IN, "easeOutCubic");
                }
            }
            else {
                clearTimeout(ddOpenTimeout);
                ddOpenTimeout = setTimeout(function () {

                    ddWrapper.addClass('open');

                }, DD_DELAY_IN);

                //$(this).addClass('open');
                $(this).children('.dropdown-content').stop(true, true).delay(DD_DELAY_IN).fadeIn(DD_ANIMATION_IN, "easeOutCubic");
            }

            clearTimeout(dMenuPosTimeout);
            dMenuPosTimeout = setTimeout(function () {

                if (ddMenu.offset().left < 0) {
                    var space = ddWrapper.offset().left; ddMenu.css("left", (-1) * space);
                    ddMenu.css("right", "auto");
                }

            }, DD_DELAY_IN);

        }).on('mouseleave', '.dropdown', function () {

            var ddMenu = $(this).children('.dropdown-content');
            clearTimeout(ddOpenTimeout); ddMenu.stop(true, true).delay(DD_DELAY_OUT).fadeOut(DD_ANIMATION_OUT, "easeInCubic");
            if (ddMenu.is(":hidden")) {
                ddMenu.hide();
            }
            $(this).removeClass('open');
        });






        var windowScroll_t;
        $(window).scroll(function () {

            clearTimeout(windowScroll_t);
            windowScroll_t = setTimeout(function () {

                if ($(this).scrollTop() > 100) {
                    $('#scroll-to-top').fadeIn();
                }
                else {
                    $('#scroll-to-top').fadeOut();
                }

            }, 500);

        });

        $('#scroll-to-top').click(function () {
            $("html, body").animate({ scrollTop: 0 }, 600, "easeOutCubic");
            return false;
        });




        $('.category-products-grid').on('mouseenter', '.item', function () {
            $(this).find(".display-onhover").fadeIn(400, "easeOutCubic");
        }).on('mouseleave', '.item', function () {
            $(this).find(".display-onhover").stop(true).hide();
        });




        $('.products-grid, .products-list').on('mouseenter', '.product-image-wrapper', function () {
            $(this).find(".alt-img").fadeIn(400, "easeOutCubic");
        }).on('mouseleave', '.product-image-wrapper', function () {
            $(this).find(".alt-img").stop(true).fadeOut(400, "easeOutCubic");
        });



        $('.fade-on-hover').on('mouseenter', function () {
            $(this).animate({ opacity: 0.75 }, 300, 'easeInOutCubic');
        }).on('mouseleave', function () {
            $(this).stop(true).animate({ opacity: 1 }, 300, 'easeInOutCubic');
        });



        var dResize = {

            winWidth: 0
    , winHeight: 0
    , windowResizeTimeout: null

    , init: function () {
        dResize.winWidth = $(window).width();
        dResize.winHeight = $(window).height();
        dResize.windowResizeTimeout;

        $(window).on('resize', function (e) {
            clearTimeout(dResize.windowResizeTimeout);
            dResize.windowResizeTimeout = setTimeout(function () {
                dResize.onEventResize(e);
            }, 50);
        });
    }

    , onEventResize: function (e) {
        //Prevent from executing the code in IE when the window wasn't actually resized
        var winNewWidth = $(window).width();
        var winNewHeight = $(window).height();

        //Code in this condition will be executed only if window was actually resized
        if (dResize.winWidth != winNewWidth || dResize.winHeight != winNewHeight) {
            //Trigger deferred resize event
            $(document).trigger("themeResize", e);

            //Additional code executed on deferred resize
            dResize.onEventDeferredResize();
        }

        //Update window size variables
        dResize.winWidth = winNewWidth;
        dResize.winHeight = winNewHeight;
    }

    , onEventDeferredResize: function () //Additional code, execute after window was actually resized
    {
        //Products grid: equal height of items
        setGridItemsEqualHeight($);

    }

        }; //end: dResize

        dResize.init();



    }); //end: on document ready



    jQuery(window).load(function () {

        setGridItemsEqualHeight(jQuery);

    }); //end: jQuery(window).load(){...}





    var MegaMenu = {

        mobileMenuThreshold: 1023, bar: jQuery('#nav')
        , panels: null
        , mobnavTriggerWrapper: null
        , itemSelector: 'li'
        , panelSelector: '.nav-panel'
        , openerSelector: '.opener'
        , isTouchDevice: ('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0)
        , ddDelayIn: 100
        , ddDelayOut: 200
        , ddAnimationDurationIn: 100
        , ddAnimationDurationOut: 300

        , init: function () {
          //  MegaMenu.panels = MegaMenu.bar.find(MegaMenu.panelSelector);
          //  MegaMenu.mobnavTriggerWrapper = jQuery('.mobnav-trigger-wrapper');
        }

        , initDualMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            if (jQuery(window).width() >= MegaMenu.mobileMenuThreshold) {
                MegaMenu.cleanUpAfterMobileMenu(); //Required for IE8
            }

            enquire
                .register('screen and (max-width: ' + (MegaMenu.mobileMenuThreshold - 1) + 'px)', {
                    match: MegaMenu.activateMobileMenu,
                    unmatch: MegaMenu.cleanUpAfterMobileMenu
                })
                .register('screen and (min-width: ' + MegaMenu.mobileMenuThreshold + 'px)', {
                    deferSetup: true,
                    setup: MegaMenu.cleanUpAfterMobileMenu,
                    match: MegaMenu.activateRegularMenu,
                    unmatch: MegaMenu.prepareMobileMenu
                });
        }

        , initMobileMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            MegaMenu.activateMobileMenu();
        }

        , activateMobileMenu: function () {
            MegaMenu.mobnavTriggerWrapper.show();
            MegaMenu.bar.addClass('nav-mobile acco').removeClass('nav-regular');
        }

        , activateRegularMenu: function () //Default state
        {
            MegaMenu.bar.addClass('nav-regular').removeClass('nav-mobile acco');
            MegaMenu.mobnavTriggerWrapper.hide();
        }

        , cleanUpAfterMobileMenu: function () {
            MegaMenu.panels.css('display', '');
        }

        , prepareMobileMenu: function () {
            MegaMenu.panels.hide();

            MegaMenu.bar.find('.item-active').each(function () {
                jQuery(this).children('.nav-panel').show();
            });
        }

    }; //end: MegaMenu




    MegaMenu.initDualMode();

    //Toggle mobile menu
    jQuery('a.mobnav-trigger').on('click', function (e) {
        e.preventDefault();
        if (jQuery(this).hasClass('active')) {
            MegaMenu.bar.removeClass('show');
            jQuery(this).removeClass('active');
        }
        else {
            MegaMenu.bar.addClass('show');
            jQuery(this).addClass('active');
        }
    });





    jQuery(function ($) {

        var menubar = MegaMenu.bar;

        menubar.on('click', '.no-click', function (e) {
            e.preventDefault();
        });

        menubar.on('mouseenter', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                var item = $(this);
                var dd = item.children('.nav-panel');

                var itemPos = item.position();
                var ddPos = { left: itemPos.left, top: itemPos.top + item.height() };
                if (dd.hasClass('full-width')) { ddPos.left = 0; }

                dd.removeClass('tmp-full-width');

                var ddConOffset = menubar.offset().left;
                var outermostCon = $(window);

                var outermostContainerWidth = outermostCon.width();
                var ddOffset = ddConOffset + ddPos.left;
                var ddWidth = dd.outerWidth();

                if ((ddOffset + ddWidth) > outermostContainerWidth) {
                    var diff = (ddOffset + ddWidth) - outermostContainerWidth;
                    var ddPosLeft_NEW = ddPos.left - diff;

                    var ddOffset_NEW = ddOffset - diff;

                    if (ddOffset_NEW < 0) {
                        dd.addClass('tmp-full-width');
                        ddPos.left = 0;
                    }
                    else {
                        ddPos.left = ddPosLeft_NEW;
                    }
                }

                dd
                    .css({
                        'left': ddPos.left + 'px',
                        'top': ddPos.top + 'px'
                    })
                    .stop(true, true).delay(MegaMenu.ddDelayIn).fadeIn(MegaMenu.ddAnimationDurationIn, "easeOutCubic");
            }

        }).on('mouseleave', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                $(this).children(".nav-panel")
                .stop(true, true).delay(MegaMenu.ddDelayOut).fadeOut(MegaMenu.ddAnimationDurationOut, "easeInCubic");
            }

        }); //end: menu top-level dropdowns

    }); //end: on document ready

    jQuery(window).on("load", function () {

        var menubar = MegaMenu.bar;

        if (MegaMenu.isTouchDevice) {
            menubar.on('click', 'a', function (e) {

                link = jQuery(this);
                if (!menubar.hasClass('nav-mobile') && link.parent().hasClass('nav-item--parent')) {
                    if (!link.hasClass('ready')) {
                        e.preventDefault();
                        menubar.find('.ready').removeClass('ready');
                        link.parents('li').children('a').addClass('ready');
                    }
                }

            }); //end: on click
        } //end: if isTouchDevice
        jQuery(window).load(function () {

            setGridItemsEqualHeight(jQuery);

        }); //end: jQuery(window).load(){...}

    }); //end: on load



    //<![CDATA[



    var MegaMenu = {

        mobileMenuThreshold: 1023, bar: jQuery('#nav')
        , panels: null
        , mobnavTriggerWrapper: null
        , itemSelector: 'li'
        , panelSelector: '.nav-panel'
        , openerSelector: '.opener'
        , isTouchDevice: ('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0)
        , ddDelayIn: 100
        , ddDelayOut: 200
        , ddAnimationDurationIn: 100
        , ddAnimationDurationOut: 300

        , init: function () {
           // MegaMenu.panels = MegaMenu.bar.find(MegaMenu.panelSelector);
           // MegaMenu.mobnavTriggerWrapper = jQuery('.mobnav-trigger-wrapper');
        }

        , initDualMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            if (jQuery(window).width() >= MegaMenu.mobileMenuThreshold) {
                MegaMenu.cleanUpAfterMobileMenu(); //Required for IE8
            }

            enquire
                .register('screen and (max-width: ' + (MegaMenu.mobileMenuThreshold - 1) + 'px)', {
                    match: MegaMenu.activateMobileMenu,
                    unmatch: MegaMenu.cleanUpAfterMobileMenu
                })
                .register('screen and (min-width: ' + MegaMenu.mobileMenuThreshold + 'px)', {
                    deferSetup: true,
                    setup: MegaMenu.cleanUpAfterMobileMenu,
                    match: MegaMenu.activateRegularMenu,
                    unmatch: MegaMenu.prepareMobileMenu
                });
        }

        , initMobileMode: function () {
            MegaMenu.init();
            MegaMenu.bar.accordion(MegaMenu.panelSelector, MegaMenu.openerSelector, MegaMenu.itemSelector);
            MegaMenu.activateMobileMenu();
        }

        , activateMobileMenu: function () {
            MegaMenu.mobnavTriggerWrapper.show();
            MegaMenu.bar.addClass('nav-mobile acco').removeClass('nav-regular');
        }

        , activateRegularMenu: function () //Default state
        {
            MegaMenu.bar.addClass('nav-regular').removeClass('nav-mobile acco');
            MegaMenu.mobnavTriggerWrapper.hide();
        }

        , cleanUpAfterMobileMenu: function () {
            MegaMenu.panels.css('display', '');
        }

        , prepareMobileMenu: function () {
            MegaMenu.panels.hide();

            MegaMenu.bar.find('.item-active').each(function () {
                jQuery(this).children('.nav-panel').show();
            });
        }

    }; //end: MegaMenu




    MegaMenu.initDualMode();

    //Toggle mobile menu
    jQuery('a.mobnav-trigger').on('click', function (e) {
        e.preventDefault();
        if (jQuery(this).hasClass('active')) {
            MegaMenu.bar.removeClass('show');
            jQuery(this).removeClass('active');
        }
        else {
            MegaMenu.bar.addClass('show');
            jQuery(this).addClass('active');
        }
    });





    jQuery(function ($) {

        var menubar = MegaMenu.bar;

        menubar.on('click', '.no-click', function (e) {
            e.preventDefault();
        });

        menubar.on('mouseenter', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                var item = $(this);
                var dd = item.children('.nav-panel');

                var itemPos = item.position();
                var ddPos = { left: itemPos.left, top: itemPos.top + item.height() };
                if (dd.hasClass('full-width')) { ddPos.left = 0; }

                dd.removeClass('tmp-full-width');

                var ddConOffset = menubar.offset().left;
                var outermostCon = $(window);

                var outermostContainerWidth = outermostCon.width();
                var ddOffset = ddConOffset + ddPos.left;
                var ddWidth = dd.outerWidth();

                if ((ddOffset + ddWidth) > outermostContainerWidth) {
                    var diff = (ddOffset + ddWidth) - outermostContainerWidth;
                    var ddPosLeft_NEW = ddPos.left - diff;

                    var ddOffset_NEW = ddOffset - diff;

                    if (ddOffset_NEW < 0) {
                        dd.addClass('tmp-full-width');
                        ddPos.left = 0;
                    }
                    else {
                        ddPos.left = ddPosLeft_NEW;
                    }
                }

                dd
                    .css({
                        'left': ddPos.left + 'px',
                        'top': ddPos.top + 'px'
                    })
                    .stop(true, true).delay(MegaMenu.ddDelayIn).fadeIn(MegaMenu.ddAnimationDurationIn, "easeOutCubic");
            }

        }).on('mouseleave', 'li.parent.level0', function () {

            if (false === menubar.hasClass('nav-mobile')) {
                $(this).children(".nav-panel")
                .stop(true, true).delay(MegaMenu.ddDelayOut).fadeOut(MegaMenu.ddAnimationDurationOut, "easeInCubic");
            }

        }); //end: menu top-level dropdowns

    }); //end: on document ready

    jQuery(window).on("load", function () {

        var menubar = MegaMenu.bar;

        if (MegaMenu.isTouchDevice) {
            menubar.on('click', 'a', function (e) {

                link = jQuery(this);
                if (!menubar.hasClass('nav-mobile') && link.parent().hasClass('nav-item--parent')) {
                    if (!link.hasClass('ready')) {
                        e.preventDefault();
                        menubar.find('.ready').removeClass('ready');
                        link.parents('li').children('a').addClass('ready');
                    }
                }

            }); //end: on click
        } //end: if isTouchDevice

    }); //end: on load




    //]]>


    //]]>
</script>